Bootstrap: docker
From: ghcr.io/bioconductor/ml-verse:RELEASE_3_16

%environment
    export PATH=${PATH}:/usr/local/texlive/bin/x86_64-linux

%post
    export PATH=$PATH:/usr/local/texlive/bin/x86_64-linux
    set -o errexit

    # Install default & yihui TinyTex latex package sets to allow knit-to-PDF
    # (hopefully in most cases) without installation of additional LaTeX packages,
    # as /usr/local/texlive is read-only in the Singularity image
    tlmgr install $(curl https://raw.githubusercontent.com/rstudio/tinytex/v0.45/tools/pkgs-custom.txt | tr '\n' ' ')
    tlmgr install $(curl https://raw.githubusercontent.com/rstudio/tinytex/v0.45/tools/pkgs-yihui.txt | tr '\n' ' ') || true

    # install arial font
    apt-get update
    echo ttf-mscorefonts-installer msttcorefonts/accepted-mscorefonts-eula select true | debconf-set-selections
    apt-get install -y ttf-mscorefonts-installer
    fc-cache -f

%labels
    Author nweeks@g.harvard.edu
